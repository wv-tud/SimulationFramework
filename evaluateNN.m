function [Y,Xf,Af] = evaluateNN(X,~,~)
%EVALUATENN neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 01-Sep-2016 15:02:38.
% 
% [Y] = evaluateNN(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [2.43965246259137;2.00210892599189;5.81844880514853;2.04414200729197;6.25685846294168;2.15618997237135;9.87305681340221;2.23161602430586;11.2350829605985;2.37214154627651];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.2668356940019533941;2.4391405488854336348;1.9736313354154402244;1.7897165670407437776;2.2913564118580791451;0.78936222040347692186;1.1075206159909134485;-2.4694013594568828829;1.924564960560838589;-0.96210214401649418736;2.287690682385210561;0.42986801798882201542;0.066763456152301725588;1.6816923368836340646;-0.74201286231616958577;1.9319378695455973194;0.76461300929770847912;0.75231642868866177576;1.0284759060437738132;-0.41893558563495275626;-0.10735146727276022316;0.31508134574332513633;-1.0735660226968439801;-0.53671290155498618812;-0.62204971317427570909;-0.00052730652233181490862;-0.60470386248461094336;-0.10354602898126315236;-1.0378243973796215105;-1.0569733780958379121;-0.50381242772765544302;0.30756907175603503957;0.28360651651610013779;1.7395327902593287206;1.4441701428340951718;4.5414124007921827797;-0.556636189234014922;0.45646583050667827175;-3.7823298778594165448;-1.7394623799766872896;1.8216636355734110442;1.8989500333059319281;2.60078636409837749;-6.7814810921166621682;2.6933812960557248495;-1.7633525946072190482;3.9262794094575719228;-1.6558386675719363179;-1.6638616905839553883;-2.1189612288544670271];
IW1_1 = [-4.0573358817452147562 -0.59615068627545408919 0.28414328318139248086 -0.99578138573861263438 0.57909134510942683605 -1.0307849683522429807 -0.6406616907917157544 0.45215660663383289153 1.906727273169425585 -1.6523522743305876226;-3.3868661904572952004 -0.48770695140089487252 -0.75322136178410303842 -1.2248288942037199867 -0.75331276150088199994 1.003017652814384375 -0.7698821258875718776 -2.6769159580940717902 -0.67995268451249779584 0.23709563178012488249;-1.738599178875932294 1.3662789871920697493 0.54119492752705000704 0.72728018901633106896 0.05451645121829779006 1.087337559906800033 -0.6410670453342999231 -1.0671821455562127134 0.90438444900405001725 -0.57040162368131730464;-1.5680906087744836963 0.66569326737719414222 -0.87280192147523172341 0.10981213191210083269 -0.32768671310995622914 -2.2087203711089857805 0.93131168164046851388 1.7775292800012292282 1.5338421582068098026 0.9045280991003030735;-1.9033143000522192434 -1.3406952888663314916 -1.1886797082614561916 2.0559359569600275108 -0.8661069756504902184 -0.51130921079764490855 -1.0041334813377529311 0.015567034871416305861 -1.2672983035336993218 1.6823100649601716583;-0.8901633637729287063 1.1486518388151547576 0.53600946471780774871 -0.24380681481216268103 -1.0822531060836357852 -0.33583742075983846753 -0.62518531554219936019 1.0034731476518974347 0.071690514052103471165 -0.86919528804185175463;-1.1952052800896013629 -0.088325338444604689636 -0.16781084934028211997 0.45603771309077328899 -1.0826257433985333467 1.3356482044343795934 0.88091191427044157614 0.23257533110773948026 -0.5162829400864703544 0.58529249796904103675;0.9087638487832037093 1.7680359968740488874 0.40244758552709264388 0.40992541227110695923 0.075464329541958405367 1.8346164796551747145 -0.26856041836658772759 0.036098889387037973175 0.15578419839883925202 0.34519899212361987439;-0.078218173578244926114 -2.6115153008046005922 1.830901204465478882 0.33648699564821049623 0.49787639536987687849 0.58742843688458767915 -0.01686838037897856607 1.1016050738592941816 0.7330618026198960635 0.31201747173923988221;2.7982469694397495985 -0.6897896719577263358 -0.1366716516293609851 1.5957031845311844265 0.80050406013199837396 -0.75798291691890196109 0.10842529547807867873 0.52599786600695397354 -0.5797987759128969687 -0.060057771670350520998;0.21313760451561269971 -0.38833981379387672028 -1.3676384059788264658 -0.85531434226034719348 -0.39414843535988181022 -0.12150151991039047361 -0.32853670331243012281 0.36157989932745410178 -0.21716667617460214124 -2.0477108195086590747;-0.032418991748443051759 2.376518894271937743 -1.6264233727209136404 0.64583455343521301018 0.0038457642188943451378 1.1886068493004864344 0.071050526293519808418 0.040483051121387975124 0.63959530893984417599 0.34401949096519351956;-0.89628857163427155808 0.13599567276428159435 1.0483660743992080366 -1.1574453945799656474 0.0024219092087049542278 0.23211434112402287711 0.71270045668319270682 1.0858400321039802794 -0.91049888102492448905 0.16165423673226889112;-0.96856531696737169224 -0.73213141706460715952 -0.5822631272298288696 0.69160443361760348679 -1.462350503260864798 1.0079543476867678375 -0.81403829641242186899 0.070397858464525231437 0.73414305638707400004 -1.8295745482631602385;1.7669173731243457137 0.61101574184016638203 -0.71144447556968259949 -0.95426633885559275505 -0.71323392372051508392 0.30546910159843287946 0.35220847064045812669 0.90798056024184869983 -0.83193890013021565277 0.96032615236939722347;-1.1039025805397619795 0.3159462525483682227 -0.70696764982276216749 1.056108142474433631 -1.2170136160338764775 -0.99446610521881861899 -1.5199711985333919095 -0.13923372323316152155 -0.099107165824111484453 0.69456985033478435554;-1.1219479911426595287 -0.14070687504108106425 -0.55007670723743373742 -0.40830203980217011361 0.045442578992645664415 -0.95823266039861287879 0.41419056836393197685 1.1458062917257654245 -0.13477753276996928822 1.0160410822244418938;-0.99387561547814362584 0.52453990930869975884 0.85894608947686335032 0.41500013573951377577 0.14109740385072025437 0.6826695002136456969 -0.085606211600419659935 -0.31322811510158082848 1.1136119939301345472 -0.50670973297108878874;-0.75669135450396496356 0.93208721582678055739 0.68203022378808775272 1.7128324910758536692 0.71541192802382991278 1.8983979774376711358 0.50534233456702282172 0.01123996114093508969 0.74626707560809424358 -1.6611427099938642638;-8.2320981906387569182 1.0296862587320474436 -0.24692106948402248179 0.67017160440495404661 0.10800456882635353639 -0.67967366042335675136 0.35052652943494205795 0.86784925762338505084 1.836892779931353914 2.1261826433269237491;1.6610168027105856048 -0.27668766240075409746 -0.34905194530110933426 -1.9424278364390343832 -0.4734722913021012225 -2.0901937177262479572 -0.82301670568467055755 0.075028341233304401969 0.42395272698767733077 0.99345756830372589086;8.8572924159272528044 0.30754044645733996655 -1.4436389812951204714 0.10267459642104766193 -0.27581249361322190961 -0.21402930792750465838 -0.067040032153506803891 0.76427554240546669018 0.29021524017451744148 -1.8399611410254794741;1.9261966602112352565 3.3672661866827660049 -3.2044928476761374014 1.8541747288340333366 -0.44356926084238701424 1.8172631584501155455 -0.25717107659376825524 0.27205960829771891341 1.0263200506463951989 0.40204207987134038538;2.792072927239686031 0.34262256664873780299 -0.28715923289022243781 1.3135660513150306805 -0.073931777409952922908 -1.2056987737335087552 0.55743518320401308497 0.87077440878793643808 0.48509229134470244205 -0.014319984747014950777;0.3056378411677481699 -0.034929991869423575312 0.77654731582989477978 0.73006958749487782523 0.68672974020954891117 1.4483172007624065536 0.22912149300274586849 0.32784060085681637764 -0.22469347506347225885 -2.6767306278728213442;-4.0334843221204312869 0.97371159999870682267 -0.18031862784585761528 0.73647033036267517403 -0.52886748555412199657 -0.49457963234071838921 1.1132406464173214555 0.50052121890151235473 0.48567732046748679497 1.807633452415125852;-2.9450010902135406177 0.19213254884376618215 -0.73581616830490281789 0.12135676928722505252 -0.65585632034337559837 -0.22293158260193132736 0.0078104514273218302034 0.83153641572250636127 -0.75333040895255987124 1.9617693382610812414;0.62724656889671948079 1.4720510921042242458 -8.4177707378108729275e-05 -1.6194879434555364828 -0.38644455239240471656 -0.42063983182248576576 -0.092257172530611553096 -0.90379132743726853239 0.96504883261857710153 -1.7331140026012799016;0.91482135431792566127 1.853017698326979712 -1.3134596496736195004 0.4924307144629974653 -0.15101151071383975277 0.34401936734889415614 0.29894492922322440931 -0.21408983097156009112 -0.4448166654018146926 0.067222249290936703092;-3.3607849868238210966 -0.63806041137697899757 0.46253459554529857689 -0.69140145388600693366 0.43056059024218695797 -1.230359803457218737 0.95255016992940966247 0.55020256024464597733 0.2400226849086798675 -0.50211494244291765554;-1.7799746035564534274 -1.645694558398147711 1.592417501761464127 0.6733899130681342271 0.35910918011808456995 0.048720752959902899337 -0.055240495135277116467 1.1503569576941392594 -0.51870047265264196401 3.0020542391026472373;-0.12908314228410061597 -0.24302024741217312376 1.2104950562214311649 0.15068141906123455609 -0.033625750514995098039 0.8247634217766512954 0.37803395837359887732 0.027408451723953793089 0.49955522302157717718 0.38755157018504760025;0.13316544461235574337 -0.17986609037594933347 0.19841357081500851645 1.1808217773866136469 1.236993303127220889 0.17883129695210420174 -0.59019331854592482767 -0.93680269586256437186 -0.12286539129999916875 -0.63325479895858138857;1.2585209782184008098 -0.33385221980354801152 0.64511165394733216427 -0.18862167163096540956 -0.08590160920602200878 0.54863902098043015876 0.34692587851938211374 1.2670962687297999683 0.53261634400453605753 0.36051287028087963815;-2.8145369075730233277 0.93399977268411482623 -0.51463567421328360041 0.11996278224169787396 0.63169067662064548596 -1.240853740129227889 0.14591743343626958906 1.3152329800239526136 2.4384282177649634349 0.24184078234371431115;6.7970720402676692018 0.19286731180873761815 -0.2696846903956523489 0.60513657150484045921 -0.24291064287801875099 0.75493876729466635744 -0.39254115271228495754 0.19741118982319544317 -0.97174204512362960529 0.95256618253246461148;0.37747763531730510467 0.20228668812248659648 -0.44301823291146735784 0.96686520887167048954 0.47751557163282248863 -0.80528469335567576248 0.49600719587805591759 0.83690314723054481938 0.39502143768565489701 0.41763560565081658815;-0.78226733498209710671 0.27229620332576998099 -0.88772341864264581179 0.08779463885408275714 -0.75088950931211884132 -0.1467155811612900207 -0.083540323311402917006 0.91157877648639484836 -0.7142586649765126916 1.8830194696588575809;-6.1181467329327610116 -1.7219286178545514243 1.1486365748537372689 -0.21917299505713991326 0.59538941031343417531 -0.79131812308628446395 -0.16740366107304208154 0.42443454204138919561 0.17512219553211946788 -0.46807468999933532494;-1.5021193436506588004 -0.045289498211190527821 1.2037009245586376416 -1.6061913325425480892 0.80212278248835400252 -1.7576646031866103304 -0.38628388613971231802 -0.54910199936463000014 0.47511756293951568075 -0.0096158215064648423775;5.9628462072359829094 -0.064488860246376761287 0.31836415599559741985 0.29267539218108246102 -0.11402568259131877493 -0.30712444695620211288 0.06366134236856513251 0.18500312285015005354 0.31909043423415295315 -0.20575066430100164006;0.5421706573575519883 0.20378886093247200462 -0.53158216643726829975 1.0250359609477248668 -0.75012583768572360654 0.23379309155685970567 0.3194827638124405067 0.61540485269438460758 -0.2574637657595790774 -0.31371535966531743922;1.9177116921081542866 1.4251510559256030941 -0.68023354613406383784 0.32455390902881620097 -0.15155349716262167536 1.8019068009527239305 1.3719833873026499038 -0.65323301510377651535 -0.036288045393017553941 -0.68672157399938971167;-11.408669400641681335 -1.0333998751192028376 0.89292294516889125777 -0.37555176634038384131 0.49856092251099176638 -0.73051167593014965096 0.17980647069544153371 -0.10848009894676943765 0.91582507258660905691 -0.89388777733408664172;5.8375722610105587052 0.88805443717077348076 -0.62323323803039365476 0.45163965467015088073 -0.21448406780130205296 0.38728070687814997175 -0.2515878364596277339 -0.16959880612661595856 -0.2219071312119851036 0.02229075543535645465;-1.6701603421138229155 0.62768699458786347822 0.53550756837423318935 -0.66925231598263001942 -0.14865938051073690485 1.0001091783739428642 -0.67900660673459889427 -0.031648127106764394056 -0.48830057134351828596 1.7324705801178061915;2.6126442923355250869 -0.19872557948058247601 0.21723008920356493001 -0.6685001052611856398 -0.24060608414033374247 -0.24595628547227346705 1.255126675340634268 -0.12170667378938804237 1.219927701545134191 -1.0192153179751475278;-2.4169061853676625518 -0.44241869413818701862 1.1676791844542191434 -0.027900610026040974232 -0.369305628664554908 0.74383662243350678889 -0.35647931786871983606 -0.062130241791892748537 -0.14525611344563824079 1.4628443203975332043;-1.5409512156486644407 -1.6366578053264608794 -0.18229879602051499154 -0.20635055610124916625 -0.53778372458447321058 -0.74698800153706890192 -1.1647601018009654528 -0.25592789297414242355 -0.46767424008582086925 1.8568720217934591155;-1.4590698839581623947 1.294453932923582018 -0.77086028157504482561 0.53937073225863374493 0.20679520077990370952 0.30805321505668314952 -0.49426018380235398064 -0.039065401717201062026 -0.40483575834464691212 0.80681727574980699469];

% Layer 2
b2 = [0.2259843189238716632;-1.3280334384328946751];
LW2_1 = [-1.1756497084402675046 -1.9924895077546476152 0.82052834942466990054 -0.047082162340470808115 0.17359461060016867506 -0.027301471762132198395 0.2050847725077483974 0.15735357371837288554 -0.0069889517872047321467 -2.2322614580427191378 0.71666805775578656945 -0.0077282239107555363022 -0.064730780069338481053 -0.96399201465268613553 -0.67798232601975638723 -0.0036687079302397639091 -0.63347423116190815229 -0.4871496459087321651 -0.052838098827160423498 -0.19412155311679282765 -0.061239756929007779784 1.3569025767359055301 -0.0040248537850254310563 -0.99621225175488348214 0.0047299189258933286434 0.083516290601125933724 0.90332920216372369904 -0.060676114934150419955 -0.026235677934694459634 0.17213650499317992293 -0.052530106192226533324 -0.32675843558262768207 -0.1360833149524817709 0.31667247302157219835 0.4044117353162899331 0.11618892826704377286 0.36741575227703165973 -0.8588007797630864415 0.00088126831181061762895 0.085317284035924700891 0.59648814861804100307 0.04990437239905604061 -0.053422555447190239741 0.022487043047768131426 0.1288824759758793459 0.15569115301148850339 0.12448905431434278968 0.16886435996272247673 -0.12605628855853334702 0.026110744148112059043;1.1382750149699736308 0.14520564771683205918 1.3749961432187665089 1.8388402139002153479 2.2721083616734025767 0.95928073766983867898 -1.4160232717824594584 2.2129795224143387067 -1.2960737370314494576 -1.1129946090793072511 1.8204730818685614935 1.2550131261340851108 1.1257777972655649279 -1.3985585719607021016 2.0413570273175274394 -2.4146835808734183892 -1.4848641706473120205 0.42614000738287566294 2.3141583468879733942 1.4989925367666969702 1.808238328555799912 -0.30248063818160120242 0.44481451647663178273 1.7962650762450997899 -0.96334094376442913621 -2.1529726718867823188 -0.57886979145676087377 -1.0329213607386373841 -2.0814976630552015635 1.689351822485771315 -1.0887543643404433702 0.65895303609299016312 1.1652043565140168813 0.5837392262027151224 -2.3975847611537708381 -3.3598810515476493777 -0.95825401120537279098 0.81541047085945206341 2.8708064760457299158 -1.3178233441675499815 -0.047514071384745705517 -0.74088614401661478936 2.747065469008295846 -2.2712045202442712188 1.8757521229520341954 -1.7563299991905980679 2.733341716763222351 2.0375861390000071793 1.3530244928780783553 2.1145269549327898595];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [2;2.05637838628274];
y1_step1.xoffset = [0;0.00414802466794235];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
